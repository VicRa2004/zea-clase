generator client {
  provider = "prisma-client"
  output   = "../src/generated"
}

datasource db {
  provider = "mysql"
}

model TipoArea {
  id         Int        @id @default(autoincrement())
  nombre     String     @db.VarChar(50)
  areas      Area[]
  contadores Contador[]

  @@map("tipo_area")
}

model Area {
  id         Int      @id @default(autoincrement())
  nombre     String   @db.VarChar(50)
  fkTipoArea Int      @map("fk_tipo_area")
  tipoArea   TipoArea @relation(fields: [fkTipoArea], references: [id])
  turnos     Turno[]

  @@index([fkTipoArea], map: "area_fk_tipo_area_fkey")
  @@map("area")
}

model Estatu {
  id     Int     @id @default(autoincrement())
  nombre String  @db.VarChar(30)
  turnos Turno[]

  @@map("estatu")
}

model Genero {
  id     Int     @id
  nombre String  @db.VarChar(30)
  turnos Turno[]

  @@map("genero")
}

model Usuario {
  id              Int     @id @default(autoincrement())
  username        String  @unique @db.VarChar(50)
  password        String  @db.VarChar(100)
  nombre          String  @db.VarChar(50)
  apellidoPaterno String? @map("apellido_paterno") @db.VarChar(50)
  apellidoMaterno String? @map("apellido_materno") @db.VarChar(50)
  turnos          Turno[]

  @@map("usuario")
}

model Turno {
  id                Int       @id @default(autoincrement())
  folio             String    @db.VarChar(10)
  fechaHora         DateTime  @map("fecha_hora")
  fechaHoraAtendida DateTime? @map("fecha_hora_atendida")
  fkUsuario         Int?      @map("fk_usuario")
  fkAreaAsignada    Int?      @map("fk_area_asignada")
  fkEstatu          Int       @map("fk_estatu")
  fkGenero          Int?      @map("fk_genero")
  area              Area?     @relation(fields: [fkAreaAsignada], references: [id])
  estatu            Estatu    @relation(fields: [fkEstatu], references: [id])
  genero            Genero?   @relation(fields: [fkGenero], references: [id])
  usuario           Usuario?  @relation(fields: [fkUsuario], references: [id])

  @@index([fkAreaAsignada], map: "turno_fk_area_asignada_fkey")
  @@index([fkEstatu], map: "turno_fk_estatu_fkey")
  @@index([fkGenero], map: "turno_fk_genero_fkey")
  @@index([fkUsuario], map: "turno_fk_usuario_fkey")
  @@map("turno")
}

model Contador {
  id          Int      @id @default(autoincrement())
  consecutivo Int
  fecha       DateTime @db.Date
  fkTipoArea  Int      @map("fk_tipo_area")
  tipoArea    TipoArea @relation(fields: [fkTipoArea], references: [id])

  @@index([fkTipoArea], map: "contador_fk_tipo_area_fkey")
  @@map("contador")
}
